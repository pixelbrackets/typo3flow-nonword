
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Concept &mdash; TYPO3 Flow 2.0.0</title>
    
    <link rel="stylesheet" href="../../_static/typo3Theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/typo3-adjustments.js"></script>
    <link rel="top" title="TYPO3 Flow 2.0.0" href="../../index.html" />
    <link rel="up" title="Introduction" href="../Index.html" />
    <link rel="next" title="Configuration" href="../../Configuration/Index.html" />
    <link rel="prev" title="Screenshots" href="../Screenshots/Index.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="../../Index.html">
            <img class="logo" src="../../_static/t3_logo_b_w_inverted.png" alt="Logo"/>
          </a></p>
        <h1><a href="../../Index.html">TYPO3 Flow 2.0.0</a></h1>
        <div class="rel">
          <a href="../Screenshots/Index.html" title="Screenshots"
             accesskey="P">previous</a> |
          <a href="../../Configuration/Index.html" title="Configuration"
             accesskey="N">next</a> |
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="concept">
<h1>Concept<a class="headerlink" href="#concept" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>The motivation for this extension was to find any file uploaded by an
editor which is not used anymore in the CMS<ul>
<li>»uploaded files« are any files inside of /uploads/ or
/fileadmin/user_upload/</li>
<li>»not used« aka »orphaned« are any files which are not referenced in
the CMS by an upload field, a link in an input field nor inside of a
text</li>
</ul>
</li>
<li>Unused files waste space</li>
<li>Files which are not referenced in the CMS maybe have to be removed
from the filesystem due to legal reasons or internal specifications</li>
<li>The following options have been considered to solve this task<ul>
<li>Upgrade the installation to version 6.0 or above and use the FAL in
some way – As much as I would have loved to do this, this option was
rejected due to extravagant expenses for the given installation</li>
<li>Crawl the frontend – Probably the best way to find static files, but
problamatic with generated images (e. g. scaled images, some images
stored in an upload field and combined to a sprite later, everything
made with GIFBUILDER) and hidden elements (start/stop time, hidden,
frontend groups)</li>
<li>Search the database – Fast and easy, but misses »uploadfolder«
definitions from TCA and is problamatic for flexforms</li>
<li>Search the backend – Crawl the TCA for fields of type »group« (upload
fields), »input« (single line input field), »text« (textarea used with
RTE) or »flex« (flexform) and search for file links in the matching
database fields<ul>
<li>Group: Combine path to uploadfolder and stored filename</li>
<li>Input/Text: Search for filestrings with a path to /uploads/ or
/fileadmin/user_upload/ with a simple regex</li>
<li>Flex: Parse the flexform and repeat the above search pattern</li>
</ul>
</li>
</ul>
</li>
<li>It turned out that the extension »kb_cleanfiles« by Bernhard Kraft
does already deal with some of the requirements (like flexform
parsing) so I decided to fork and extend it</li>
<li>Since my extension was made for a specific installation and solved all
requirements I did not take any effort in fancy options or any
subsidiary functions<ul>
<li>…but you can do this if you want, since it&#8217;s Open Source and I have
published it on GitHub (<a class="reference external" href="https://github.com/webit-de/typo3-orphanfiles/">https://github.com/webit-de/typo3-orphanfiles/</a>),
so please fix, patch, extend or fork this extension</li>
</ul>
</li>
</ul>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
			<div class="sidebarInner">
          <h3>Table Of Contents</h3>
		  <!-- MODIFICATION START: include up to three levels in the TOC tree -->
          <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../Index.html">Introduction</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../WhatDoesItDo/Index.html">What does it do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Screenshots/Index.html">Screenshots</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Concept</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Configuration/Index.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../KnownProblems/Index.html">Known problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../To-doList/Index.html">To-Do list</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Changelog/Index.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Contribution/Index.html">Contribution</a></li>
</ul>

		  <!-- MODIFICATION END -->
          <h3 style="margin-top: 1.5em;">Search</h3>
          <form class="search" action="../../search.html" method="get">
            <input type="text" name="q" size="18" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Enter search terms or a module, class or function name.
          </p>
			</div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="../Screenshots/Index.html" title="Screenshots"
             >previous</a> |
          <a href="../../Configuration/Index.html" title="Configuration"
             >next</a> |
          <a href="../../genindex.html" title="General Index"
             >index</a>
            <br/>
            <a href="../../_sources/Introduction/Concept/Index.txt"
               rel="nofollow">Show Source</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2011-2012, TYPO3 Flow team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>